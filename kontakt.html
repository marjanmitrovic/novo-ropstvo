<!DOCTYPE html>
<html lang="sr">
<head>
<link rel="alternate" href="http://marjanmitrovic.github.io/novo-ropstvo/index.html" hreflang="sr" />
<link rel="alternate" href="http://marjanmitrovic.github.io/novo-ropstvo/index_en.html" hreflang="en" />
<link rel="alternate" href="http://marjanmitrovic.github.io/novo-ropstvo/index_cz.html" hreflang="cs" />

  <meta charset="utf-8" />
  <title>Kontakt — Novo ropstvo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; margin:0; padding:20px; background:#111214; color:#e6e7e9; }
    form { display:flex; flex-direction:column; gap:12px; }
    label { font-weight:600; }
    input, textarea { width:100%; padding:10px; border-radius:8px; border:1px solid #333; background:#1a1a1a; color:#fff; }
    button { padding:10px 16px; border:none; border-radius:8px; font-weight:600; background:#0ea5e9; color:#fff; cursor:pointer; }
    button:hover { background:#0284c7; }
    .muted { color:#9aa0a6; font-size:.9rem; }
    label.required::after { content:" *"; color:#ef4444; font-weight:700; }
    /* loading spinner */
    button.is-loading{position:relative; opacity:.85}
    button.is-loading::after{
      content:""; position:absolute; right:12px; top:50%; width:14px; height:14px; margin-top:-7px;
      border:2px solid rgba(255,255,255,.6); border-top-color:transparent; border-radius:50%;
      animation:spin .8s linear infinite
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .error{color:#ff7b72; font-size:.95rem}
  </style>
</head>
<body>
  <h2>Kontakt forma</h2>
  <form id="contact-form" action="https://formspree.io/f/xyzpljrg" method="POST" novalidate>
    <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">

    <label for="name" class="required">Ime i prezime</label>
    <input id="name" name="name" type="text" required>

    <label for="email" class="required">E-mail</label>
    <input id="email" name="email" type="email" required>

    <label for="message" class="required">Poruka</label>
    <textarea id="message" name="message" rows="5" required></textarea>

    <p class="muted">Polja označena <strong>*</strong> su obavezna.</p>

    <button id="submit" type="submit" aria-live="polite">Pošalji</button>
    <div id="err" class="error" role="alert" style="display:none"></div>
  </form>

  <script>
    const form = document.getElementById('contact-form');
    const btn  = document.getElementById('submit');
    const err  = document.getElementById('err');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      err.style.display = 'none';
      btn.classList.add('is-loading');
      btn.disabled = true;
      btn.textContent = 'Šaljem…';

      try {
        const data = new FormData(form);
        const res = await fetch(form.action, {
          method: 'POST',
          body: data,
          headers: { 'Accept': 'application/json' }
        });

        if (res.ok) {
          window.location.href = 'hvala.html';
        } else {
          const j = await res.json().catch(()=>({}));
          throw new Error(j.errors?.map(e=>e.message).join(', ') || 'Došlo je do greške. Pokušajte ponovo.');
        }
      } catch (e2) {
        err.textContent = e2.message || 'Došlo je do greške. Pokušajte ponovo.';
        err.style.display = 'block';
        btn.classList.remove('is-loading');
        btn.disabled = false;
        btn.textContent = 'Pošalji';
      }
    });
  </script>
</body>
</html>
