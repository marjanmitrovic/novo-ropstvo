<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>New Slavery — Gallery</title>
<link rel="icon" href="images/cover-en.png">
<style>
  :root{--bg:#0b0c0e;--text:#e6e7e9;--muted:#9aa0a6;--card:#111214;--border:#23262a;--accent:#38bdf8}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;background:var(--bg);color:var(--text)}
  .container{width:min(1100px,92vw);margin:0 auto}
  header{position:sticky;top:0;z-index:10;backdrop-filter:blur(6px);border-bottom:1px solid var(--border);background:color-mix(in srgb,var(--bg) 85%, transparent)}
  .nav{display:flex;justify-content:space-between;align-items:center;padding:14px 0}
  .btn{border:1px solid var(--border);background:#0f172a;color:#fff;padding:8px 14px;border-radius:12px;text-decoration:none;font-weight:600}
  .chip{border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 12px;border-radius:12px;text-decoration:none}
  .chip[aria-current="true"]{border-color:var(--text)}
  main{padding:24px 0 48px}
  h1{font-size:28px;margin:0 0 12px}
  .lede{color:var(--muted);margin:0 0 18px}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
  .card{position:relative;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .card img{display:block;width:100%;height:180px;object-fit:cover;transition:transform .2s}
  .card:hover img{transform:scale(1.03)}
  .cap{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,.45);padding:2px 8px;border-radius:8px;font-size:.85rem}
  .lb{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;place-items:center;z-index:50}
  .lb.open{display:grid}
  .lb img{max-width:min(92vw,1200px);max-height:90vh;border-radius:12px;border:1px solid #222;background:#000}
  .lb .close,.lb .prev,.lb .next{
    position:absolute;top:16px;background:rgba(255,255,255,.12);border:1px solid #333;color:#fff;
    padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700
  }
  .lb .close{right:16px}
  .lb .prev{left:16px;bottom:16px;top:auto}
  .lb .next{right:16px;bottom:16px;top:auto}
</style>
</head>
<body>
<header>
  <div class="container nav">
    <a href="index_en.html"><img src="images/cover-en.png" alt="Cover" style="height:48px;border-radius:6px"></a>
    <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
      <nav aria-label="Language" style="display:flex;gap:6px">
        <a class="chip" href="galerija.html">SR</a>
        <a class="chip" href="galerija_en.html" aria-current="true">EN</a>
        <a class="chip" href="galerija_cz.html">CZ</a>
      </nav>
      <a class="chip" href="index_en.html">Home</a>
      <a class="chip" href="odlomak_en.html">Excerpt</a>
      <a class="btn" href="placanje_en.html">Buy EPUB</a>
      <a href="donations.html" class="btn">Donations</a>

    </div>
  </div>
</header>

<main class="container">
  <h1>Gallery</h1>
  <p class="lede">Sketches and illustrations. Click any image to enlarge.</p>
  <div id="gallery" class="grid" role="list"></div>
</main>

<div id="lightbox" class="lb" aria-hidden="true">
  <button class="close" aria-label="Close">✕</button>
  <button class="prev" aria-label="Previous">←</button>
  <img alt="Enlarged image">
  <button class="next" aria-label="Next">→</button>
</div>

<script>
  const IMG_PATH='images', START=1, END=30;
  const EXCLUDE=new Set([1,2,7,9,30]); // izbačene slike
  const gallery=document.getElementById('gallery'); const items=[];
  for(let i=START;i<=END;i++){
    if(EXCLUDE.has(i)) continue;
    const src=`${IMG_PATH}/skica${i}.png`;
    items.push(src);
    const a=document.createElement('a'); a.href=src; a.className='card'; a.setAttribute('role','listitem');
    a.innerHTML=`<img src="${src}" alt="Sketch ${i}" loading="lazy"><span class="cap">#${i}</span>`;
    a.addEventListener('click',e=>{e.preventDefault();openLb(items.length-1);});
    gallery.appendChild(a);
  }
  const lb=document.getElementById('lightbox'), img=lb.querySelector('img');
  const c=lb.querySelector('.close'), p=lb.querySelector('.prev'), n=lb.querySelector('.next'); let idx=0;
  function openLb(i){idx=i;img.src=items[idx];lb.classList.add('open');lb.setAttribute('aria-hidden','false');}
  function closeLb(){lb.classList.remove('open');lb.setAttribute('aria-hidden','true');img.src='';}
  function prev(){idx=(idx-1+items.length)%items.length;img.src=items[idx];}
  function next(){idx=(idx+1)%items.length;img.src=items[idx];}
  c.onclick=closeLb;p.onclick=prev;n.onclick=next;lb.addEventListener('click',e=>{if(e.target===lb)closeLb();});
  addEventListener('keydown',e=>{if(!lb.classList.contains('open'))return; if(e.key==='Escape')closeLb(); if(e.key==='ArrowLeft')prev(); if(e.key==='ArrowRight')next();});
</script>
</body>
</html>
